 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Attendance | Student Management</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <header class="dashboard-header">
    <h1>Attendance Management</h1>
    <button onclick="goBack()">Back</button>
  </header>

  <main class="attendance-section">
    <h2>Filter Students</h2>
    <div class="filters">
      <select id="attendanceClassFilter">
        <option value="">All Classes</option>
      </select>
      <select id="attendanceStatusFilter">
        <option value="">All Status</option>
        <option value="Present">Present</option>
        <option value="Absent">Absent</option>
      </select>
    </div>

    <h2>Student Attendance List</h2>
    <table id="attendanceTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Roll No</th>
          <th>Class</th>
          <th>Attendance</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <script src="assets/js/script.js"></script>
  <script>
    function goBack() {
      window.location.href = "dashboard.html";
    }

    function loadAttendance() {
      const students = JSON.parse(localStorage.getItem("students")) || [];
      const tbody = document.getElementById("attendanceTable").querySelector("tbody");
      const classFilter = document.getElementById("attendanceClassFilter").value;
      const statusFilter = document.getElementById("attendanceStatusFilter").value;

      tbody.innerHTML = "";

      const filtered = students.filter(student => {
        const matchesClass = classFilter === "" || student.class === classFilter;
        const matchesStatus = statusFilter === "" || student.attendance === statusFilter;
        return matchesClass && matchesStatus;
      });

      filtered.forEach((student, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${student.name}</td>
          <td>${student.roll}</td>
          <td>${student.class}</td>
          <td>${student.attendance}</td>
          <td>
            <button onclick="markAttendance(${index}, 'Present')">Present</button>
            <button onclick="markAttendance(${index}, 'Absent')">Absent</button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    function markAttendance(index, status) {
      const students = JSON.parse(localStorage.getItem("students"));
      students[index].attendance = status;
      localStorage.setItem("students", JSON.stringify(students));
      loadAttendance();
    }

    function populateAttendanceFilters() {
      const students = JSON.parse(localStorage.getItem("students")) || [];
      const classSelect = document.getElementById("attendanceClassFilter");
      const classes = [...new Set(students.map(s => s.class))];

      classSelect.innerHTML = `<option value="">All Classes</option>`;
      classes.forEach(cls => {
        const option = document.createElement("option");
        option.value = cls;
        option.textContent = cls;
        classSelect.appendChild(option);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      populateAttendanceFilters();
      loadAttendance();

      document.getElementById("attendanceClassFilter").addEventListener("change", loadAttendance);
      document.getElementById("attendanceStatusFilter").addEventListener("change", loadAttendance);
    });
  </script>
</body>
</html>

